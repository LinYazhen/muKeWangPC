/**
 * Created by linyazhen on 15/8/14.
 */
var outer = document.getElementById("outer");
var inner = document.getElementById("inner");
var left = document.getElementById("left");
var right = document.getElementById("right");
var index=1;
var animated=false;
var page=3;
function animate(offset){
    if (offset == 0) {
        return;
    }
    animated = true;
    var curLeft = parseInt(inner.style.left) + offset;
    var time = 300;
    var interval = 10;
    var speed = offset / (time / interval);
    move();
    function move() {
        if ((speed > 0 && curLeft > parseInt(inner.style.left)) || (speed < 0 && curLeft < parseInt(inner.style.left))) {
            inner.style.left = parseInt(inner.style.left) + speed + 'px';
            setTimeout(move, 10);
        } else {
            inner.style.left = curLeft + 'px';
            if (curLeft >-50) {
                inner.style.left = -1000 * page + 'px';
            }
            if (curLeft < -3050) {
                inner.style.left = -1000 + 'px';
            }
            animated = false;
        }
    }
}

left.onclick = function () {
    if (!animated) {
        if (index == 1) {
            index = 3;
        } else {
            index--;
        }
        animate(1000);
    }
};

right.onclick = function () {
    if (!animated) {
        if (index == 3) {
            index = 1;
        } else {
            index++;
        }
        animate(-1000);
    }
};
function play() {
    timer = setTimeout(function () {
        right.onclick();
        play();
    }, 3000);
}

function stop() {
    clearTimeout(timer);
}

outer.onmouseover = stop;
outer.onmouseout = play;
play();